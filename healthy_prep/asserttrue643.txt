i admit certain laziness comes rich text editing i like ck editor formerly known fck fact i often go ck editor demo page impromptu rich text editing online eventually i cut paste source demo editor whatever final target blog wiki page etc i writing oftentimes without saving text anywhere else along way bit dangerous practice regular saves i known close ck editor window prematurely saving work resulting unrecoverable footinmoutherror problem ck editor demo page give way save work demo page i decided smart thing would put save button page work get sent local sling repository click mouse yes yes i could use something like zoho writer done i really prefer ck editor i like idea persisting rich text locally local instance sling i went ahead implemented sling persistence ck editor demo page i could done requisite code trickery greasemonkey mozilla jetpack allows me easily put save repository menu command browser window context menu firefox menu command show ck editor demo page nowhere else like note menu command bottom repository case apache sling i actually using day crx content repository extreme highly spiffed commercial version apache sling free developer edition download free version i use day implementation couple reasons compelling aside freeness crx comes excellent administration tools including visual repository browser sling sorely lacks powering save repository menu command following mozilla jetpack script scroll sideways see lines wrap sling jetpack js copyright left kas thomas code may freely reused attribution jetpack future import menu jetpack menu context page beforeshow function menu context var menucommand save repository var frontwindow jetpack tabs focused contentwindow var fred ckeditor demo slurp content memory jetpack tabs focused contentwindow location href indexoffred return function savetorepository repository storage url var base url localhost content get content want post var params content getcontent prompt user give name var name frontwindow prompt name entry name name length throw name provided get reference front window var thewindow jetpack tabs focused contentwindow appending full url tells sling create new node var url base url name prepare ajax post new xmlhttprequest open post url true send proper header information along request setrequestheader content type application form urlencoded setrequestheader content length params length setrequestheader connection close show whether succeeded onreadystatechange function ifhttp readystate thewindow alert status status ajax post sendparams function getcontent var doc jetpack tabs focused contentdocument var iframedoc doc getelementsbytagname iframe contentdocument return iframedoc body innerhtml manage menu menu remove menucommand menu add label menucommand command savetorepository couple quick comments i use jetpack menu context page beforeshow method order test frontmost current focused browser tab fact ck editor demo page need show menu command page page script bails otherwise bottom call menu add note menu add preceded call menu remove fails harmlessly silently nothing remove call remove needed otherwise script add new copy menu command every time mouse right clicked pretty soon multiple copies appended bottom context menu want slurping content ck editor demo page pretty easy editor window iframe iframe page get innerhtml body iframe getcontent method accomplishes function getcontent var doc jetpack tabs focused contentdocument var iframedoc doc getelementsbytagname iframe contentdocument return iframedoc body innerhtml rest pretty much straight ajax post repository base url plus user supplied name post appended tell sling servlet create new node tree spot example repository localhost want new node named mynode parent simply post localhost parent mynode sling dutifully creates new node thusly named basically ck editor sling integration lines code thanks mozilla jetpack